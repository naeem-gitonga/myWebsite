cache:
  paths:
    - backend/cdk/node_modules/

test_cdk:
  stage: test-cdk
  image: node:20.11.1
  needs: 
    - job: build_staging
      artifacts: true
  dependencies:
    - build_staging
  rules:
    - if: '$CI_PIPELINE_SOURCE == "merge_request_event"'
      when: never
  script:
    - cd backend/cdk
    - npm i
    - npm run test
